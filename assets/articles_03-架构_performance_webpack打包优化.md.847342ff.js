import{_ as s,o as a,c as n,V as p}from"./chunks/framework.b450deef.js";const F=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"articles/03-æ¶æ„/performance/webpackæ‰“åŒ…ä¼˜åŒ–.md","filePath":"articles/03-æ¶æ„/performance/webpackæ‰“åŒ…ä¼˜åŒ–.md"}'),l={name:"articles/03-æ¶æ„/performance/webpackæ‰“åŒ…ä¼˜åŒ–.md"},o=p(`<h2 id="webpackæ‰“åŒ…ä¼˜åŒ–" tabindex="-1">webpackæ‰“åŒ…ä¼˜åŒ– <a class="header-anchor" href="#webpackæ‰“åŒ…ä¼˜åŒ–" aria-label="Permalink to &quot;webpackæ‰“åŒ…ä¼˜åŒ–&quot;">â€‹</a></h2><h3 id="åˆ†åŒ…" tabindex="-1">åˆ†åŒ… <a class="header-anchor" href="#åˆ†åŒ…" aria-label="Permalink to &quot;åˆ†åŒ…&quot;">â€‹</a></h3><p>ç¬¬ä¸‰æ–¹èµ„æºéƒ½å„è‡ªä¸€ä¸ªjsï¼Œå¦‚vue.jsã€swiper.jsã€ç»„ä»¶åº“.jsç­‰ ä¼˜ç‚¹æ˜¯åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜å¯ä»¥å¢é‡éƒ¨ç½²å’ŒåŠ è½½ï¼Œç¼ºç‚¹æ˜¯å¹¶å‘é™åˆ¶</p><blockquote><p>å¾—ç›Šäºhttp2ï¼Œç¼ºç‚¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œå› æ­¤ç¬¬ä¸‰æ–¹èµ„æºæœ€å¥½éƒ½å•ç‹¬ä¸€ä¸ªjs</p></blockquote><ol><li>æ‰‹åŠ¨åœ¨å·¥ç¨‹å†…ç²˜è´´ <code>xx.min.js</code>(é€šè¿‡è‡ªåŠ¨éƒ¨ç½²åˆ°cdnç›®å½•)</li><li>webpackåˆ†åŒ…é…ç½®å†™å‡½æ•°ï¼Œæ‰€æœ‰ä¾èµ–éƒ½æ‹†æˆå¯¹åº”ä¾èµ–åçš„jsèµ„æº</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> config </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">splitChunks</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minSize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">300</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 300kæ‰åˆ†åŒ…</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">chunks</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">all</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// åŒæ­¥+å¼‚æ­¥æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">cacheGroups</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">autoVendor</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/[</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">]</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">]/</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">name</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">module</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// ä¹Ÿå¯ä»¥è·å–ç¬¬ä¸‰æ–¹èµ„æºçš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="color:#A6ACCD;">          const getNameReg </span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/[</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">]</span><span style="color:#C3E88D;">node_modules</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">](</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">*?)([</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">]|</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">)/</span></span>
<span class="line"><span style="color:#A6ACCD;">          const </span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">packageName</span><span style="color:#F07178;">] = module.context.match(getNameReg)</span></span>
<span class="line"><span style="color:#F07178;">          return \`npm/ \${packageName.replace(&#39;@&#39;,&#39;&#39;)}\`</span></span>
<span class="line"><span style="color:#F07178;">        }</span></span>
<span class="line"><span style="color:#F07178;">      }</span></span>
<span class="line"><span style="color:#F07178;">    }</span></span>
<span class="line"><span style="color:#F07178;">  }</span></span>
<span class="line"><span style="color:#F07178;">}</span></span></code></pre></div><h3 id="å‰ç«¯èµ„æºå‹ç¼©gzip" tabindex="-1">å‰ç«¯èµ„æºå‹ç¼©gzip <a class="header-anchor" href="#å‰ç«¯èµ„æºå‹ç¼©gzip" aria-label="Permalink to &quot;å‰ç«¯èµ„æºå‹ç¼©gzip&quot;">â€‹</a></h3><p>å¯ä»¥è®©nginxå‹ç¼©èµ„æºæˆgzipï¼Œäº¤ç»™æµè§ˆå™¨è§£å‹ æœåŠ¡å™¨å‹ç¼©éœ€è¦è€—æ—¶ï¼Œæ›´å½»åº•çš„æ˜¯å‰ç«¯æ‰“åŒ…åç›´æ¥å‹ç¼©</p><p>å…¶ä»–å‹ç¼©ç®—æ³• Brotli,æœåŠ¡å™¨å®‰è£…ngxæ¨¡å—åï¼Œå¯ä»¥æ”¯æŒæœåŠ¡å™¨å‹ç¼©æˆBrotliï¼Œäº¤ç»™æµè§ˆå™¨è§£å‹</p><p>å¦‚æœæ²¡æœ‰httpçš„keepaliveï¼Œæ¯æ¬¡è¯·æ±‚çš„æ—¶é—´åˆ†æä¸­éƒ½ä¼šæœ‰<code>DNS Lookup</code>å’Œ<code>Initial connecttion(TCP/SSL)</code></p><h3 id="é™æ€æœåŠ¡å™¨httpç¼“å­˜é…ç½®" tabindex="-1">é™æ€æœåŠ¡å™¨httpç¼“å­˜é…ç½® <a class="header-anchor" href="#é™æ€æœåŠ¡å™¨httpç¼“å­˜é…ç½®" aria-label="Permalink to &quot;é™æ€æœåŠ¡å™¨httpç¼“å­˜é…ç½®&quot;">â€‹</a></h3><p>å‚è€ƒ<a href="./../http/httpç¼“å­˜.html">httpç¼“å­˜</a></p><p>nginxé…ç½®</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">http</span></span>
<span class="line"><span style="color:#A6ACCD;">  etag off;</span></span>
<span class="line"><span style="color:#A6ACCD;">  add_header Last-Modified &quot;&quot;;</span></span></code></pre></div><p>ğŸ‘† å…³é—­é™æ€èµ„æºè¯·æ±‚å“åº”å¤´çš„<code>etag</code>å’Œ<code>Last-Modified</code>(é»˜è®¤æ˜¯å¼€å¯)</p><p>å¼ºç¼“å­˜é…ç½® <code>expires 5s</code></p><p>è°·æ­Œæµè§ˆå™¨ä¼šç»™htmlé»˜è®¤æ·»åŠ <code>Cache-Control = 0</code></p><p>å› æ­¤å…³äºhttpç¼“å­˜å…¶å®ä¸éœ€è¦æ‰‹åŠ¨é…ç½®</p><h3 id="é™æ€æœåŠ¡å™¨http2é…ç½®" tabindex="-1">é™æ€æœåŠ¡å™¨http2é…ç½® <a class="header-anchor" href="#é™æ€æœåŠ¡å™¨http2é…ç½®" aria-label="Permalink to &quot;é™æ€æœåŠ¡å™¨http2é…ç½®&quot;">â€‹</a></h3><p>å‚è€ƒ<a href="./../http/http2.html">http2</a></p><blockquote><p>tips: å¯ä»¥ç›´ä¸Š <a href="./../http/http3.html">http3</a></p></blockquote><p>nginx æ”¯æŒhttp2ï¼ŒæœåŠ¡å™¨éœ€è¦å®‰è£… <strong>http2çš„æ¨¡å—</strong> åœ¨listenç«¯å£å¤„é…ç½®sslå’Œhttp2</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">listen</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">443</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">listen</span><span style="color:#A6ACCD;"> [::]:443 ssl http2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">server_name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">åŸŸå</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/var/www/åŒ…å</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># å‰ç«¯é™æ€èµ„æºç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">ssl_certificate</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/letsencrypt/live/åŸŸå/fullchain.pem</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># è¯ä¹¦</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">ssl_certificate_key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/letsencrypt/live/åŸŸå/privkey.pem</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># è¯ä¹¦</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">try_files</span><span style="color:#A6ACCD;"> $uri $uri</span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#F78C6C;">404</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p>TODO: å„å¤„è¡¥å……ç»†èŠ‚</p>`,24),e=[o];function t(c,r,y,C,D,i){return a(),n("div",null,e)}const h=s(l,[["render",t]]);export{F as __pageData,h as default};
