import{_ as s,o as a,c as n,V as l}from"./chunks/framework.b450deef.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"articles/04-é¢è¯•/æ‰‹å†™ç³»åˆ—/æ‰‹å†™ç³»åˆ—-LRUç¼“å­˜ç®—æ³•.md","filePath":"articles/04-é¢è¯•/æ‰‹å†™ç³»åˆ—/æ‰‹å†™ç³»åˆ—-LRUç¼“å­˜ç®—æ³•.md"}'),p={name:"articles/04-é¢è¯•/æ‰‹å†™ç³»åˆ—/æ‰‹å†™ç³»åˆ—-LRUç¼“å­˜ç®—æ³•.md"},o=l(`<h2 id="lru-least-recently-used" tabindex="-1">LRU(Least Recently Used) <a class="header-anchor" href="#lru-least-recently-used" aria-label="Permalink to &quot;LRU(Least Recently Used)&quot;">â€‹</a></h2><blockquote><p>å±äºç®—æ³•èŒƒç•´ï¼Œä½†æ˜¯å› ä¸ºå®é™…åº”ç”¨ä¹Ÿå¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥ä½œä¸ºæ‰‹å†™ç³»åˆ—</p></blockquote><p>Least Recently Used æœ€è¿‘æœ€å°‘ä½¿ç”¨</p><p>åˆ›å»ºæ—¶é—´ä¸Š: å…ˆè¿›å…ˆå‡º å¦å¤–è¿˜æœ‰ä½¿ç”¨çš„æ—¶é—´(å½“ä½¿ç”¨ <code>get</code> è·å–æ•°æ®åï¼Œè¯¥æ¡æ•°æ®éœ€è¦æ›´æ–°åˆ°æœ€å‰é¢)</p><ul><li>æ“ä½œç³»ç»Ÿåº•å±‚çš„å†…å­˜ç®¡ç†ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æœ‰ <code>LRU</code> ç®—æ³•</li><li>ç¼“å­˜æœåŠ¡ï¼Œæ¯”å¦‚ <code>redis</code> ç­‰ç­‰</li><li>æ¯”å¦‚æµè§ˆå™¨çš„æœ€è¿‘æµè§ˆè®°å½•å­˜å‚¨</li></ul><p>2ä¸ªå®ç°æ–¹å‘</p><ul><li><code>hashmap</code> çš„æ•°æ®ç»“æ„ï¼Œèƒ½å¤Ÿé«˜æ•ˆçš„æ£€ç´¢ä¸ä»»æ„é”®ç›¸å…³è”çš„å€¼ <ul><li>æ¯”å¦‚å­—ç¬¦ä¸²</li><li>ES6 çš„ <code>Map</code></li><li>æˆ–è€…ä»»ä½•æ™®é€šçš„å¯¹è±¡ {}</li><li>ã€ç¼“å­˜ã€‘ä¸ä¸€ä¸ªã€å›ºå®šå®¹é‡çš„é”®å€¼å¯¹å­˜å‚¨ã€‘æ²¡ä»€ä¹ˆä¸åŒ</li></ul></li><li>å°†æ‰€æœ‰å…ƒç´ æŒ‰æœ€åè®¿é—®é¡ºåºå­˜å‚¨ <ul><li>æˆ‘ä»¬å°†éœ€è¦é«˜æ•ˆåœ°ç§»åŠ¨å…ƒç´ </li><li>åŒå‘é“¾è¡¨</li></ul></li></ul><h3 id="hashmap-å­—å…¸" tabindex="-1">hashMap -å­—å…¸ <a class="header-anchor" href="#hashmap-å­—å…¸" aria-label="Permalink to &quot;hashMap -å­—å…¸&quot;">â€‹</a></h3><blockquote><p><a href="./../é¢˜åº“/é¢è¯•-æ•°æ®ç»“æ„.html#å­—å…¸">æ•°æ®ç»“æ„-å­—å…¸</a></p></blockquote><ul><li>åˆ›å»º <code>LRUCache</code> ç±»ï¼Œç”¨æ¥å½“å­˜å‚¨ç©ºé—´</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">LRUCache</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">maxSize</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">maxSize</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">maxSize</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å­˜å‚¨é•¿åº¦</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Map</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å­˜å‚¨æ•°æ®</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å­˜å‚¨æ•°æ®ï¼Œé€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è·å–æ•°æ®</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> lruCache </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LRUCache</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>é‡‡ç”¨ <code>Map</code> æ•°æ®ç»“æ„å­˜å‚¨æ•°æ®ï¼Œå› ä¸ºå®ƒçš„å­˜å–æ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code>ï¼Œæ•°ç»„ä¸º <code>O(n)</code></li><li>å®ç° <code>get</code> å’Œ <code>set</code> æ–¹æ³•ï¼Œç”¨æ¥è·å–å’Œæ·»åŠ æ•°æ®</li><li>æˆ‘ä»¬çš„å­˜å‚¨ç©ºé—´æœ‰é•¿åº¦é™åˆ¶ï¼Œæ‰€ä»¥æ— éœ€æä¾›åˆ é™¤æ–¹æ³•ï¼Œå­˜å‚¨æ»¡ä¹‹åï¼Œè‡ªåŠ¨åˆ é™¤æœ€ä¹…è¿œçš„é‚£æ¡æ•°æ®</li><li>å½“ä½¿ç”¨ <code>get</code> è·å–æ•°æ®åï¼Œè¯¥æ¡æ•°æ®éœ€è¦æ›´æ–°åˆ°æœ€å‰é¢</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å­˜å‚¨æ•°æ®ï¼Œé€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼</span></span>
<span class="line"><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;">(key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> value) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å»é‡</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">has</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å­˜å…¥æ•°æ®</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ğŸ”¥ å¦‚æœè¶…å‡ºäº†å®¹é‡ï¼Œåˆ™éœ€è¦åˆ é™¤æœ€ä¹…çš„æ•°æ®</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">size</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">maxSize</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">_removeFirstItem</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// è·å–æ•°æ®</span></span>
<span class="line"><span style="color:#82AAFF;">get</span><span style="color:#A6ACCD;">(key) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æœªæ‰¾åˆ°</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">has</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è·å–å…ƒç´ </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ğŸ”¥ æ›´æ–°åˆ°æœ€å‰é¢</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// åˆ é™¤å…ƒç´ </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// é‡æ–°æ’å…¥å…ƒç´ </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç§»é™¤æœ€æ—©çš„æ•°æ®</span></span>
<span class="line"><span style="color:#82AAFF;">_removeFirstItem</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">delKey</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">dataMap</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">delKey</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="åŒå‘é“¾è¡¨" tabindex="-1">åŒå‘é“¾è¡¨ <a class="header-anchor" href="#åŒå‘é“¾è¡¨" aria-label="Permalink to &quot;åŒå‘é“¾è¡¨&quot;">â€‹</a></h3><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2><ul><li><a href="https://juejin.cn/post/7105654083347808263#heading-5" target="_blank" rel="noreferrer">é¢è¯•å®˜ï¼šè¯·ä½¿ç”¨JSå®Œæˆä¸€ä¸ªLRUç¼“å­˜ï¼Ÿ</a></li><li><a href="https://juejin.cn/post/6844904183426973710" target="_blank" rel="noreferrer">[è¯‘]ä½¿ç”¨ JavaScript å®ç°ä¸€ä¸ªé«˜æ•ˆçš„ LRU cache - åŒå‘é“¾è¡¨</a></li></ul>`,16),e=[o];function t(c,r,y,F,D,i){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
