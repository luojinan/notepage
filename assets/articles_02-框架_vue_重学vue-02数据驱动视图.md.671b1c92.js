import{_ as s,o as a,c as n,V as l}from"./chunks/framework.b450deef.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"articles/02-æ¡†æ¶/vue/é‡å­¦vue-02æ•°æ®é©±åŠ¨è§†å›¾.md","filePath":"articles/02-æ¡†æ¶/vue/é‡å­¦vue-02æ•°æ®é©±åŠ¨è§†å›¾.md"}'),p={name:"articles/02-æ¡†æ¶/vue/é‡å­¦vue-02æ•°æ®é©±åŠ¨è§†å›¾.md"},o=l(`<h2 id="æœ€åŸºç¡€çš„åŠŸèƒ½æ˜¯æ•°æ®é©±åŠ¨è§†å›¾-é‚£å’Œä»¥å¾€ç”¨æ¨¡ç‰ˆè¯­æ³•å†™é¡µé¢æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢-éƒ½æ˜¯ç”¨jsæ¥å†™é¡µé¢" tabindex="-1">æœ€åŸºç¡€çš„åŠŸèƒ½æ˜¯æ•°æ®é©±åŠ¨è§†å›¾ï¼Œé‚£å’Œä»¥å¾€ç”¨æ¨¡ç‰ˆè¯­æ³•å†™é¡µé¢æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿéƒ½æ˜¯ç”¨jsæ¥å†™é¡µé¢ <a class="header-anchor" href="#æœ€åŸºç¡€çš„åŠŸèƒ½æ˜¯æ•°æ®é©±åŠ¨è§†å›¾-é‚£å’Œä»¥å¾€ç”¨æ¨¡ç‰ˆè¯­æ³•å†™é¡µé¢æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢-éƒ½æ˜¯ç”¨jsæ¥å†™é¡µé¢" aria-label="Permalink to &quot;æœ€åŸºç¡€çš„åŠŸèƒ½æ˜¯æ•°æ®é©±åŠ¨è§†å›¾ï¼Œé‚£å’Œä»¥å¾€ç”¨æ¨¡ç‰ˆè¯­æ³•å†™é¡µé¢æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿéƒ½æ˜¯ç”¨jsæ¥å†™é¡µé¢&quot;">â€‹</a></h2><p>\bæ¨¡ç‰ˆè¯­æ³•ä»…ä»…èƒ½å¤Ÿåšåˆ°æ–¹ä¾¿jsæ¸²æŸ“å¸¦å˜é‡çš„<code>dom</code>ï¼Œæ¸²æŸ“å®Œåå°±æ—¶æ™®é€šçš„<code>é™æ€dom</code>äº†ï¼Œæ›´æ–°domä¾ç„¶è¦æ“ä½œdom</p><p><code>vueã€react</code>çš„ç‰¹ç‚¹éƒ½æ˜¯æ•°æ®é©±åŠ¨è§†å›¾ï¼Œä¹Ÿå°±æ˜¯<strong>domæ¸²æŸ“å®Œæˆåï¼Œé€šè¿‡æ•°æ®æ›´æ–°dom</strong></p><p>å¦‚ï¼Œæˆ‘ä»¬å‰é¢CDNå¼•å…¥Vueçš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬æŠŠnewä¹‹åçš„vueç¤ºä¾‹æŒ‚åœ¨<code>å˜é‡app</code>ä¸Šï¼Œåœ¨æ§åˆ¶å°é€šè¿‡<code>app.title = &#39;xx&#39;</code> ï¼Œå³å¯æ›´æ–°dom</p><h2 id="reactçš„æ•°æ®é©±åŠ¨è§†å›¾" tabindex="-1"><code>React</code>çš„æ•°æ®é©±åŠ¨è§†å›¾ <a class="header-anchor" href="#reactçš„æ•°æ®é©±åŠ¨è§†å›¾" aria-label="Permalink to &quot;\`React\`çš„æ•°æ®é©±åŠ¨è§†å›¾&quot;">â€‹</a></h2><blockquote><p>åœ¨è¯´Vueçš„æ•°æ®é©±åŠ¨è§†å›¾å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹<code>react</code>çš„é©±åŠ¨å½¢å¼æ˜¯é€šè¿‡<a href="https://react.docschina.org/docs/state-and-lifecycle.html" target="_blank" rel="noreferrer">setState()</a></p></blockquote><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220306154527.png" alt=""> æˆ‘ä»¬ä»¿ç…§è¿™ç§å½¢å¼ï¼Œå†æˆ‘ä»¬çš„vueç±»ä¸­åŠ ä¸€ä¸ª<code>setData</code>æ–¹æ³• ğŸ‘‡</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Vue</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;font-style:italic;">el</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">template</span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">åˆ›å»ºä¸€ä¸ªVue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">template</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">template</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">renderByDataTemp</span><span style="color:#F07178;">() </span><span style="color:#676E95;font-style:italic;">// å¤„ç†data template ç”Ÿæˆdom</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">renderByDataTemp</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newHtml</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">replace</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">\\{\\{</span><span style="color:#89DDFF;">(</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">+?)</span><span style="color:#A6ACCD;">\\}\\}</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">g</span><span style="color:#89DDFF;">,(...</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">getValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">])</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">render</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">newHtml</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getValue</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reduce</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">pre</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">next</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pre</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">next</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},this.</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">html</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rootDom</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">el</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">rootDom</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">html</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">setData</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newData</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">assign</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">newData</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">renderByDataTemp</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>åœ¨æ§åˆ¶å°è¾“å…¥<code>app.setData({title:&#39;aa&#39;})</code>æ¥æ›´æ–°è§†å›¾</p><h2 id="vueçš„æ•°æ®é©±åŠ¨è§†å›¾" tabindex="-1">Vueçš„æ•°æ®é©±åŠ¨è§†å›¾ <a class="header-anchor" href="#vueçš„æ•°æ®é©±åŠ¨è§†å›¾" aria-label="Permalink to &quot;Vueçš„æ•°æ®é©±åŠ¨è§†å›¾&quot;">â€‹</a></h2><blockquote><p>Vueä¼šæŠŠè¿™ç§æ•°æ®å«åšå“åº”å¼æ•°æ®ï¼Œå®ç°çš„å“åº”å¼çš„è¿‡ç¨‹å«åšæ•°æ®åŠ«æŒã€æ•°æ®ä»£ç†ã€æ•°æ®ç›‘å¬ <img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20220307233604.png" alt=""></p></blockquote><p>åŸç†ç›¸ä¿¡å¤§å®¶è€³ç†Ÿèƒ½è¯¦ï¼Œ<code>Vue2</code>ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noreferrer">Object.defineProperty</a> çš„APIé‡å†™å¯¹è±¡å±æ€§çš„<code>getã€set</code>ï¼Œè¿™ä¹Ÿæ˜¯Vue2ä¸æ”¯æŒIE9ä»¥ä¸‹çš„åŸå› </p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> $data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineProperty</span><span style="color:#A6ACCD;">(data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">newVal</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// data.x = newVal // å¯¼è‡´æ­»å¾ªç¯</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">$data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">newVal</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">render</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">get</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">$data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><h2 id="è§£å†³object-definepropertyçš„ç¼ºç‚¹" tabindex="-1">è§£å†³<code>Object.defineProperty</code>çš„ç¼ºç‚¹ <a class="header-anchor" href="#è§£å†³object-definepropertyçš„ç¼ºç‚¹" aria-label="Permalink to &quot;è§£å†³\`Object.defineProperty\`çš„ç¼ºç‚¹&quot;">â€‹</a></h2><ul><li><code>$set(data, prop, newVal)</code></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">$set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">obj</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineProperty</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,{</span></span>
<span class="line"><span style="color:#F07178;">    set</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    get</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span></span>
<span class="line"><span style="color:#82AAFF;">$set</span><span style="color:#A6ACCD;">(obj</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><ul><li>é‡å†™æ•°ç»„æ–¹æ³•</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"></span></code></pre></div><h2 id="vue3çš„proxy" tabindex="-1">Vue3çš„proxy <a class="header-anchor" href="#vue3çš„proxy" aria-label="Permalink to &quot;Vue3çš„proxy&quot;">â€‹</a></h2><p>å…³äº<a href="./../js/proxy.html">Proxy</a></p>`,20),e=[o];function t(c,r,y,F,D,i){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
