import{_ as s,o as a,c as n,V as l}from"./chunks/framework.b450deef.js";const d=JSON.parse('{"title":"VueRouter åŸç†","description":"","frontmatter":{},"headers":[],"relativePath":"articles/02-æ¡†æ¶/vue/é‡å­¦vue-routeråŸç†.md","filePath":"articles/02-æ¡†æ¶/vue/é‡å­¦vue-routeråŸç†.md"}'),o={name:"articles/02-æ¡†æ¶/vue/é‡å­¦vue-routeråŸç†.md"},p=l(`<h1 id="vuerouter-åŸç†" tabindex="-1">VueRouter åŸç† <a class="header-anchor" href="#vuerouter-åŸç†" aria-label="Permalink to &quot;VueRouter åŸç†&quot;">â€‹</a></h1><h2 id="æ‰‹å†™å‰ç«¯è·¯ç”±èƒŒæ™¯" tabindex="-1">æ‰‹å†™å‰ç«¯è·¯ç”±èƒŒæ™¯ <a class="header-anchor" href="#æ‰‹å†™å‰ç«¯è·¯ç”±èƒŒæ™¯" aria-label="Permalink to &quot;æ‰‹å†™å‰ç«¯è·¯ç”±èƒŒæ™¯&quot;">â€‹</a></h2><p>é¦–å…ˆä¸å±€é™åœ¨ <code>Vue</code> æ¡†æ¶é‡Œï¼Œæ‰©å¤§ä¸€ç‚¹ï¼Œå‰ç«¯ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”± <code>router</code></p><p>é€šè¿‡ä¸åŒçš„ <code>URL</code> è®¿é—®åˆ°ä¸åŒçš„å‰ç«¯å†…å®¹, æ˜¯å‰ç«¯åœ¨é™æ€æœåŠ¡å™¨ä¸­è‡ªå¸¦çš„åŠŸèƒ½(ç”±é™æ€æœåŠ¡å™¨å®ç°)</p><blockquote><p>ğŸ¤” ä¸ºä»€ä¹ˆç°ä»£å‰ç«¯åº”ç”¨è¿˜è¦æ‰‹åŠ¨ <code>Js</code> å®ç°è·¯ç”±é€»è¾‘ï¼Ÿ</p></blockquote><blockquote><p>å‰ç«¯è·¯ç”±ä¸€èˆ¬æ˜¯åœ¨ SPA å•é¡µåº”ç”¨é‡Œæ‰éœ€è¦æ‰‹åŠ¨å®ç°çš„ã€‚</p><p>è¿™æ˜¯å› ä¸ºå•é¡µåº”ç”¨çš„æ¦‚å¿µå°±æ˜¯å¸Œæœ›é¡µé¢ä¸ <code>reload</code> è€Œæ˜¯å±€éƒ¨æ¸²æŸ“é¡µé¢ã€‚è¿™å°±é™åˆ¶äº†ä¸èƒ½ç”±é™æ€æœåŠ¡å™¨æ¥é€šè¿‡ <code>URL</code> åŠ è½½å‰ç«¯é¡µé¢(ä¼š <code>reload</code>)</p></blockquote><blockquote><p>ğŸ‘† æ­¤æ—¶å°±äº§ç”Ÿäº†æ‰‹åŠ¨ <code>Js</code> å®ç°å•é¡µåº”ç”¨çš„é¡µé¢åŠ è½½è·¯ç”±é€»è¾‘éœ€æ±‚</p></blockquote><h2 id="æ‰‹å†™å‰ç«¯è·¯ç”±å®ç°æ€è·¯" tabindex="-1">æ‰‹å†™å‰ç«¯è·¯ç”±å®ç°æ€è·¯ <a class="header-anchor" href="#æ‰‹å†™å‰ç«¯è·¯ç”±å®ç°æ€è·¯" aria-label="Permalink to &quot;æ‰‹å†™å‰ç«¯è·¯ç”±å®ç°æ€è·¯&quot;">â€‹</a></h2><p>å› æ­¤æœ‰2ä¸ªå¤§éš¾ç‚¹ï¼š</p><ol><li>æ‹¦æˆªæµè§ˆå™¨åŸç”Ÿçš„ åˆ‡æ¢ <code>URL</code>, ç”±è‡ªå·± <code>Js</code> å®ç°çš„è·¯ç”±é€»è¾‘æ¸²æŸ“ç›®æ ‡é¡µé¢å†…å®¹</li><li>ç¦ç”¨æµè§ˆå™¨åŸç”Ÿçš„ åˆ‡æ¢ <code>URL</code> è®¿é—®å‰ç«¯é¡µé¢ï¼Œé˜²æ­¢ <code>reload</code> æ•´ä¸ªå•é¡µ</li></ol><p>ğŸ¤” ä»è¿™2ä¸ªéš¾ç‚¹æ€è€ƒ, å› ä¸ºæˆ‘ä»¬åˆ‡æ¢é¡µé¢æ¸²æŸ“é€»è¾‘åªèƒ½é€šè¿‡ <code>URL</code> å˜åŒ–, å¹¶ä¸” <code>URL</code> èƒ½æŒ‡å‡ºç›®æ ‡é¡µé¢</p><p>ğŸ‘‡ é‚£å°±åªèƒ½æ‰¾ <code>URL</code> å˜åŒ–ä½†æ˜¯ä¸ä¼šè§¦å‘æµè§ˆå™¨ <code>reload</code> çš„æ–¹æ³•ï¼š</p><ol><li><code>URL Hash</code><ul><li><code>hash</code> æ˜¯ <code>URL</code> ä¸­ <code>#</code> åŠåé¢çš„é‚£éƒ¨åˆ†ï¼Œå¸¸ç”¨ä½œé”šç‚¹åœ¨é¡µé¢å†…è¿›è¡Œå¯¼èˆª</li><li>æ”¹å˜ <code>URL</code> ä¸­çš„ <code>Hash</code> éƒ¨åˆ†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°</li><li><code>URl Query Params</code> <code>?</code> å‚æ•°çš„å½¢å¼ï¼Œä¼šå¼•èµ·é¡µé¢åˆ·æ–° â•</li></ul></li><li><code>Window History API</code></li></ol><h2 id="url-hash" tabindex="-1">URL Hash <a class="header-anchor" href="#url-hash" aria-label="Permalink to &quot;URL Hash&quot;">â€‹</a></h2><p>ğŸ‘† æˆ‘ä»¬çŸ¥é“ <code>URL Hash</code> æ˜¯ä¸ä¼šå¼•èµ·æµè§ˆå™¨é¡µé¢åˆ·æ–°çš„, å› æ­¤ä¸éœ€è¦ <code>Js</code> æ‰‹åŠ¨å®ç°ç¦æ­¢ <code>é¡µé¢reload</code></p><p>åªéœ€è¦ <code>Js</code> å®ç°æ‹¦æˆª <code>URL</code> å˜åŒ–ï¼Œå¹¶æŒ‰ç…§æŒ‡å®šé¡µé¢æ¸²æŸ“å³å¯</p><p>æ‹¦æˆª <code>URL Hash</code> å˜åŒ–å¯ä»¥é€šè¿‡ç›‘å¬ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/hashchange_event" target="_blank" rel="noreferrer">hashchange</a> äº‹ä»¶(ç”±æµè§ˆå™¨ <code>window</code> äº‹ä»¶ç›‘å¬å™¨ <code>EventListener</code> æä¾›çš„ <code>API</code> å®ç°)</p><p>ğŸ‘‡ åŸç”Ÿ <code>HTMl/JS</code> å®ç°</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">&lt;!-- 1. é€šè¿‡aæ ‡ç­¾è§¦å‘ URL å˜åŒ–, çœå» Js å†™è·³è½¬é€»è¾‘ --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">ul</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#/home</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">home</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#/about</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">about</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">ul</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">&lt;!-- 2. æ ¹æ® URL Hash æ˜¾ç¤ºçš„é¡µé¢å†…å®¹ placeholder --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">&lt;!-- å½“ç„¶å¯ä»¥ä¸ç”¨ placeholder ç›´æ¥å¾€ body ä¸‹åŠ  DOM --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routeView</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> routerView </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> routeView</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 3. ç›‘å¬ Hash åˆ‡æ¢</span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hashchange</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hash</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hash</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å–å‡º URL ä¸Šçš„ Hash</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hash</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ ¹æ® Hash æ¸²æŸ“ç›¸åº”çš„é¡µé¢å†…å®¹ è¿™ä¸€æ­¥å¯å¼•å…¥ Vue ç»„ä»¶</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>å¦å¤–è¿˜éœ€è¦å¤„ç†è¾¹ç•Œé—®é¢˜ï¼Œ<code>URL</code> é¦–æ¬¡åŠ è½½é¡µé¢ ä¸ä¼šè§¦å‘ <code>hashchange</code></p><p>ğŸ‘‡ å› æ­¤éœ€è¦ <code>Js</code> æ‰‹åŠ¨å®ç°ç›‘å¬é¦–æ¬¡åŠ è½½ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/DOMContentLoaded_event" target="_blank" rel="noreferrer">DOMContentLoaded</a> è§¦å‘ä¸€æ¬¡ <code>Hash</code> é€»è¾‘</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 4. ç›‘å¬ é¡µé¢é¦–æ¬¡åŠ è½½ load</span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DOMContentLoaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hash</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœä¸å­˜åœ¨hashå€¼ï¼Œé‚£ä¹ˆé‡å®šå‘åˆ° #/ å¹¶è§¦å‘ hashchange å› æ­¤ä¸ç”¨å†™æ¸²æŸ“é€»è¾‘</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hash</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// æ ¹æ® Hash æ¸²æŸ“ç›¸åº”çš„é¡µé¢å†…å®¹ è¿™ä¸€æ­¥å¯å¼•å…¥ Vue ç»„ä»¶</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hash</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hash</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hash</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/hashrouter1.gif" alt=""></p><h2 id="history-api" tabindex="-1">History API <a class="header-anchor" href="#history-api" aria-label="Permalink to &quot;History API&quot;">â€‹</a></h2><p><code>History</code> æ¨¡å¼ä¸‹ï¼Œç›´æ¥ä¿®æ”¹ <code>URL</code> ä¼šè§¦å‘é¡µé¢ <code>reload</code></p><p>é€šè¿‡ <code>History API</code> ä¿®æ”¹ <code>URL</code> åˆ™ä¸ä¼šè§¦å‘é¡µé¢ <code>reload</code></p><blockquote><p><code>history.pushState()</code> æ–¹æ³•å‘å½“å‰æµè§ˆå™¨ä¼šè¯çš„å†å²å †æ ˆä¸­æ·»åŠ ä¸€ä¸ªçŠ¶æ€ï¼ˆstateï¼‰ - <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History/pushState" target="_blank" rel="noreferrer">MDNs</a></p></blockquote><p>å› æ­¤ <code>aæ ‡ç­¾</code> çš„è·³è½¬, éœ€è¦ç¦ç”¨åŸé€»è¾‘, è€Œå…¶ä»– <code>Js</code> è§¦å‘çš„è·³è½¬(å¦‚æŒ‰é’®é€»è¾‘)åˆ™éœ€è¦é™åˆ¶åªèƒ½ç”¨ <code>History API</code></p><p>ğŸ‘‡ é¡µé¢é¦–æ¬¡åŠ è½½ <code>load</code> çš„æ—¶å€™, éå†ç°æœ‰æ‰€æœ‰ <code>aæ ‡ç­¾</code> ç»‘å®šç‚¹å‡»äº‹ä»¶ç¦ç”¨åŸé€»è¾‘</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DOMContentLoaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> onLoad)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onLoad</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">linkList</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelectorAll</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a[href]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//  éå†ç°æœ‰æ‰€æœ‰ aæ ‡ç­¾ ç»‘å®šç‚¹å‡»äº‹ä»¶ç¦ç”¨åŸé€»è¾‘</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">linkList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">el</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">preventDefault</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ‘† é™¤äº†è¦ç¦ç”¨ <code>aæ ‡ç­¾</code> åŸé€»è¾‘, è¿˜è¦åšæ–°çš„è·³è½¬é€»è¾‘</p><ol><li>ä¹Ÿå°±æ˜¯ä½¿ç”¨ <code>History API</code> æ¥ä¿®æ”¹ <code>URL</code> ä¸º <code>aæ ‡ç­¾</code> ä¸Šçš„ <code>href</code></li><li>æ‰‹åŠ¨æ ¹æ® URL æ¸²æŸ“å¯¹åº”é¡µé¢</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onLoad</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">linkList</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelectorAll</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a[href]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// éå†ç°æœ‰æ‰€æœ‰ aæ ‡ç­¾ ç»‘å®šç‚¹å‡»äº‹ä»¶ç¦ç”¨åŸé€»è¾‘</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">linkList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">el</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">preventDefault</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ \`History API\` æ¥è·³è½¬ \`aæ ‡ç­¾\` ä¸Šçš„ \`href\` æŒ‡å®šé¡µé¢</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">history</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pushState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAttribute</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">href</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)) </span><span style="color:#676E95;font-style:italic;">// &lt;-- this</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// æ‰‹åŠ¨æ ¹æ® URL æ¸²æŸ“å¯¹åº”é¡µé¢ ç›‘å¬ popstate ä¸ä¼šè§¦å‘ ä¸‹é¢ä¼šæåˆ°</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// &lt;-- this</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ‘‡ åŒæ ·çš„ï¼Œé¦–æ¬¡åŠ è½½ä¹Ÿä¸ä¼šè§¦å‘è·¯ç”±ç›‘å¬ å› æ­¤éœ€è¦ æ‰‹åŠ¨æ¸²æŸ“é¦–æ¬¡åŠ è½½æ—¶çš„ <code>URL</code> å¯¹åº”çš„é¡µé¢å†…å®¹</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onLoad</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// æ ¹æ®é¦–æ¬¡åŠ è½½æ—¶çš„ URL æ¸²æŸ“å¯¹åº”çš„é¡µé¢å†…å®¹</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// &lt;-- this</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">linkList</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelectorAll</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a[href]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">// éå†ç°æœ‰æ‰€æœ‰ aæ ‡ç­¾ ç»‘å®šç‚¹å‡»äº‹ä»¶ç¦ç”¨åŸé€»è¾‘</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#A6ACCD;">linkList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">el</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ‘† è‡³æ­¤, æˆ‘ä»¬å®ç°äº†è·³è½¬, <code>URL</code> å˜åŒ–ä¸è§¦å‘é¡µé¢ <code>reload</code></p><p>æµè§ˆå™¨æµ‹è¯•æ—¶ä¼šå‘ç° <code>pushState</code> ä¸å…è®¸åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„æºä¸­ä½¿ç”¨ <img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230110131540.png" alt=""></p><p>ğŸ‘‡ æˆ‘ä»¬ç”¨ä¸€ä¸ªé™æ€æœåŠ¡å™¨æ‰“å¼€è¿™ä¸ª <code>HTML</code> æ–‡ä»¶ <img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/historyrouter2.gif" alt=""></p><p>ğŸ‘† å¯ä»¥çœ‹å‡ºè·³è½¬ä¸ä¼šè§¦å‘ <code>reload</code> ä½†æ˜¯æµè§ˆå™¨çš„å‰è¿›åé€€æ²¡æœ‰æ ¹æ® <code>URL</code> æ¸²æŸ“ç›¸åº”çš„é¡µé¢å†…å®¹ï¼Œè€Œä¸”åœ¨è·³è½¬åçš„è·¯å¾„åˆ·æ–°æ—¶, è¿™ä¸ªé™æ€æœåŠ¡å™¨ä¼šæŠ¥ <code>404</code></p><blockquote><p>æ¯å½“æ¿€æ´»åŒä¸€æ–‡æ¡£ä¸­ä¸åŒçš„å†å²è®°å½•æ¡ç›®æ—¶ï¼Œ<code>popstate</code> äº‹ä»¶å°±ä¼šåœ¨å¯¹åº”çš„ <code>window</code> å¯¹è±¡ä¸Šè§¦å‘ã€‚å¦‚æœå½“å‰å¤„äºæ¿€æ´»çŠ¶æ€çš„å†å²è®°å½•æ¡ç›®æ˜¯ç”± <code>history.pushState()</code> æ–¹æ³•åˆ›å»ºçš„æˆ–è€…æ˜¯ç”± <code>history.replaceState()</code> æ–¹æ³•ä¿®æ”¹çš„ï¼Œåˆ™ <code>popstate</code> äº‹ä»¶çš„ <code>state</code> å±æ€§åŒ…å«äº†è¿™ä¸ªå†å²è®°å½•æ¡ç›®çš„ <code>state</code> å¯¹è±¡çš„ä¸€ä¸ªæ‹·è´ã€‚ - <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/popstate_event" target="_blank" rel="noreferrer">popstate - MDN</a></p></blockquote><blockquote><p>è°ƒç”¨ <code>history.pushState()</code> æˆ–è€… <code>history.replaceState()</code> ä¸ä¼šè§¦å‘ <code>popstate</code> äº‹ä»¶ã€‚<code>popstate</code> äº‹ä»¶åªä¼šåœ¨æµè§ˆå™¨æŸäº›è¡Œä¸ºä¸‹è§¦å‘ï¼Œæ¯”å¦‚ç‚¹å‡»åé€€æŒ‰é’®ï¼ˆæˆ–è€…åœ¨ <code>JavaScript</code> ä¸­è°ƒç”¨ <code>history.back()</code> æ–¹æ³•ï¼‰ã€‚å³ï¼Œåœ¨åŒä¸€æ–‡æ¡£çš„ä¸¤ä¸ªå†å²è®°å½•æ¡ç›®ä¹‹é—´å¯¼èˆªä¼šè§¦å‘è¯¥äº‹ä»¶ã€‚</p></blockquote><p>ğŸ‘‡ ç›‘å¬ <code>popstate</code> æµè§ˆå™¨åé€€å‰è¿›è§¦å‘æ ¹æ® <code>URL</code> æ¸²æŸ“ç›¸åº”çš„é¡µé¢å†…å®¹</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">popstate</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>è‡³æ­¤å°±å®ç°äº† <code>history</code> æ¨¡å¼çš„è·¯ç”±æœºåˆ¶äº†</p><p>ä½†æ˜¯åˆ·æ–°çš„ <strong>é™æ€æœåŠ¡å™¨</strong> <code>404</code> é—®é¢˜ï¼Œéœ€è¦é™æ€æœåŠ¡çš„ <code>nginx</code> é…ç½®ä¸€ä¸‹å¦‚ï¼šç¬¦åˆæŸä¸ªç›®å½•ä¸‹çš„è·¯å¾„(å½“ç„¶ä¹Ÿå¯ä»¥æ‰€æœ‰é™æ€æœåŠ¡å™¨è·¯å¾„)éƒ½é‡å®šå‘åˆ° <code>å•é¡µåº”ç”¨æ ¹html</code> èµ„æº, ç”± <code>Js</code> è·¯ç”±æœºåˆ¶æ¸²æŸ“æ­£ç¡®çš„é¡µé¢</p><p>ğŸ‘‡ åŸç”Ÿ <code>HTMl/JS</code> å®ç°</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">&lt;!-- 1. é€šè¿‡aæ ‡ç­¾è§¦å‘ URL å˜åŒ–, çœå» Js å†™è·³è½¬é€»è¾‘ --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">ul</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/home</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">home</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/about</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">about</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">ul</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">&lt;!-- 2. æ ¹æ® URL Hash æ˜¾ç¤ºçš„é¡µé¢å†…å®¹ placeholder --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">&lt;!-- å½“ç„¶å¯ä»¥ä¸ç”¨ placeholder ç›´æ¥å¾€ body ä¸‹åŠ  DOM --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">routeView</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> routerView </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> routeView</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 3. ç›‘å¬é¡µé¢é¦–æ¬¡åŠ è½½</span></span>
<span class="line"><span style="color:#A6ACCD;">  window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DOMContentLoaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> onLoad)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onLoad</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 6. æ ¹æ®é¦–æ¬¡åŠ è½½æ—¶çš„ URL æ¸²æŸ“å¯¹åº”çš„é¡µé¢å†…å®¹</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 4. éå†ç°æœ‰æ‰€æœ‰ aæ ‡ç­¾ ç»‘å®šç‚¹å‡»äº‹ä»¶ç¦ç”¨åŸé€»è¾‘</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">linkList</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelectorAll</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a[href]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">linkList</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">el</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">click</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">preventDefault</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">         </span><span style="color:#676E95;font-style:italic;">// 5. ä½¿ç”¨ \`History API\` æ¥è·³è½¬ \`aæ ‡ç­¾\` ä¸Šçš„ \`href\` æŒ‡å®šé¡µé¢</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">history</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pushState</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">el</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getAttribute</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">href</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 7. ç›‘å¬ \`popstate\` æµè§ˆå™¨åé€€å‰è¿›è§¦å‘æ ¹æ® \`URL\` æ¸²æŸ“ç›¸åº”çš„é¡µé¢å†…å®¹</span></span>
<span class="line"><span style="color:#A6ACCD;">  window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addEventListener</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">popstate</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">routerView</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">innerHTML</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">location</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="è¡¥å……" tabindex="-1">è¡¥å…… <a class="header-anchor" href="#è¡¥å……" aria-label="Permalink to &quot;è¡¥å……&quot;">â€‹</a></h2><ul><li>ä¸Šé¢éƒ½æ˜¯é€šè¿‡ <code>aæ ‡ç­¾</code> è·³è½¬çš„, ä½†æ˜¯2ç§æ¨¡å¼çš„è·³è½¬æ˜¯æˆªç„¶ä¸åŒçš„! <code>hash</code> æ—¶å°±æ˜¯ <code>aæ ‡ç­¾</code> é»˜è®¤äº‹ä»¶ç›´æ¥ä¿®æ”¹ <code>URL</code>, ä½†æ˜¯ <code>history</code> æ—¶æ˜¯æ‰‹åŠ¨æ”¹å†™æˆæˆ‘ä»¬å°è£…çš„è·³è½¬äº‹ä»¶</li><li><code>History API</code> é™¤äº† <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History/pushState" target="_blank" rel="noreferrer">pushState</a> è¿˜æœ‰ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History/replaceState" target="_blank" rel="noreferrer">replaceState</a></li><li>æœ¬æ–‡åªæ˜¯è®²è§£ <code>Vue</code> è·¯ç”±(å‰ç«¯è·¯ç”±)çš„å®ç°æ‰€åŸºäºçš„åº•å±‚é€»è¾‘</li><li><code>VueRouter</code> è¿˜æŠŠè¿™äº›è·¯ç”±æ¨¡å¼å°è£…æˆä¸€ä¸ª <code>Classç±»</code> ä»¥åŠæä¾›æ¸²æŸ“ç»„ä»¶çš„åŠŸèƒ½, å¹¶é€šè¿‡ <code>Vue plugin</code> çš„å½¢å¼æŠ›å‡º - è¿™éƒ¨åˆ†ä¸º <a href="./æºç åˆ†æ-vueRouter.html">VueRouteræºç åˆ†æ</a></li><li>ä¸Šé¢åŸç”Ÿ <code>HTML/JS</code> å®ç°çš„æºç  <a href="https://github.com/luojinan/note-by-vitepress/tree/master/test/vue_router" target="_blank" rel="noreferrer">htmlä»£ç </a></li></ul>`,49),e=[p];function t(c,r,y,F,D,i){return a(),n("div",null,e)}const C=s(o,[["render",t]]);export{d as __pageData,C as default};
