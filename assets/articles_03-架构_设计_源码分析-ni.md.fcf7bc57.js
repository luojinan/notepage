import{_ as s,o as n,c as a,V as o}from"./chunks/framework.b450deef.js";const A=JSON.parse('{"title":"æºç åˆ†æ-ni","description":"","frontmatter":{},"headers":[],"relativePath":"articles/03-æ¶æ„/è®¾è®¡/æºç åˆ†æ-ni.md","filePath":"articles/03-æ¶æ„/è®¾è®¡/æºç åˆ†æ-ni.md"}'),l={name:"articles/03-æ¶æ„/è®¾è®¡/æºç åˆ†æ-ni.md"},p=o(`<h1 id="æºç åˆ†æ-ni" tabindex="-1">æºç åˆ†æ-ni <a class="header-anchor" href="#æºç åˆ†æ-ni" aria-label="Permalink to &quot;æºç åˆ†æ-ni&quot;">â€‹</a></h1><p><a href="https://github.com/antfu/ni" target="_blank" rel="noreferrer">antfu/ni</a></p><h2 id="æ€»ä½“æ€è·¯" tabindex="-1">æ€»ä½“æ€è·¯ <a class="header-anchor" href="#æ€»ä½“æ€è·¯" aria-label="Permalink to &quot;æ€»ä½“æ€è·¯&quot;">â€‹</a></h2><p>ğŸ‘‡ æ€è·¯å¾ˆç®€å•</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">1. æ ¹æ®é”æ–‡ä»¶çŒœæµ‹ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨ \`npm/yarn/pnpm\`</span></span>
<span class="line"><span style="color:#A6ACCD;">2. æŠ¹å¹³ä¸åŒçš„åŒ…ç®¡ç†å™¨çš„å‘½ä»¤å·®å¼‚</span></span>
<span class="line"><span style="color:#A6ACCD;">3. æœ€ç»ˆè¿è¡Œç›¸åº”çš„è„šæœ¬</span></span></code></pre></div><p>éš¾ç‚¹åœ¨æ€ä¹ˆä»£ç†å¹¶è¿è¡Œå…¨å±€çš„æŒ‡ä»¤ <code>pnpm xx</code> ä»¥åŠå¦‚ä½•æ‰“åŒ…çº¯tsåº“</p><p>åˆ¤æ–­é¡¹ç›®ç”¨çš„æ˜¯ä»€ä¹ˆåŒ…ç®¡ç†å™¨åè€Œä¸éš¾, æŠ¹å¹³ä¼šç¹çä¸€ç‚¹, ä½†æ˜¯ä¹Ÿä¸æ˜¯éš¾ç‚¹</p><p>å…ˆè®¾ç½®ä¸ºé¡¹ç›®å†…éƒ¨ä½¿ç”¨çš„æŒ‡ä»¤, å·¥å…·å°±ä¸å®‰è£…åˆ°å…¨å±€äº†</p><p>å› ä¸ºæ˜¯é€šè¿‡æŒ‡ä»¤è¿è¡Œ, æ‰€ä»¥è¿™ä¸ªå·¥å…·çš„æ‰§è¡Œé€»è¾‘åº”è¯¥æ˜¯ <code>bin</code> æ‰§è¡Œ</p><blockquote><p>bin åœ¨å·¥ä½œä¸­å°è£… <code>cli</code> è„šæ‰‹æ¶å·¥å…·æ—¶å¸¸ç”¨</p></blockquote><p>å› ä¸ºä¸åƒåŒ…ç®¡ç†å™¨é‚£æ · <code>pnpm xxx</code> æŒ‡ä»¤(<code>pnpm</code>)ç›¸åŒ å‚æ•°(<code>add/remove</code>)ä¸åŒæ¥æ‰§è¡Œé€»è¾‘</p><p>è€Œæ˜¯ <code>ni xx</code> <code>nr xx</code> ... æŒ‡ä»¤ä¸åŒ ä¹Ÿå°±éœ€è¦åˆ›å»ºå‡ºä¸åŒçš„å¯¹åº”çš„ <code>bin</code></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@antfu/ni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">bin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">ni</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/ni.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">nci</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/nci.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">nr</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/nr.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">nu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/nu.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">nx</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/nx.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">na</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/na.mjs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">nun</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bin/nun.mjs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ‘‡ <code>bin/ni.mjs</code> å¼•å…¥ä¸€ä¸ª <code>dist</code> æ¨¡å— è¯¥æ¨¡å—åº”æ˜¯ <code>IIFE</code> ç«‹å³æ‰§è¡Œ</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/usr/bin/env node</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../dist/ni.mjs</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><hr><p>ğŸ¤” TODO: <code>bin</code> ç”¨ <code>nodejs</code> æ‰§è¡Œ <code>js</code> å’Œ <code>sh</code> æ‰§è¡Œ <code>shell</code> æœ‰ä»€ä¹ˆåŒºåˆ«å— ???</p><hr><p>ç”¨ <code>unbuild</code> æ‰“åŒ… <code>ts</code> ç”¨ <code>tsno</code> è¿è¡Œ <code>ts</code></p><h2 id="æ­å»ºjsåº“ç¯å¢ƒ" tabindex="-1">æ­å»ºjsåº“ç¯å¢ƒ <a class="header-anchor" href="#æ­å»ºjsåº“ç¯å¢ƒ" aria-label="Permalink to &quot;æ­å»ºjsåº“ç¯å¢ƒ&quot;">â€‹</a></h2><h3 id="æ­å»ºtsç¯å¢ƒ" tabindex="-1">æ­å»ºtsç¯å¢ƒ <a class="header-anchor" href="#æ­å»ºtsç¯å¢ƒ" aria-label="Permalink to &quot;æ­å»ºtsç¯å¢ƒ&quot;">â€‹</a></h3><p>å®‰è£… <code>typescript</code> å’Œ <code>nodejs</code> ç›´æ¥è¿è¡Œ <code>ts</code> çš„å·¥å…· <code>esno</code>( <code>es-node</code> ä¸å¥½ç”¨)</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pnpm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">typescript</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">esno</span></span></code></pre></div><p>ğŸ‘‡ <code>tsconfig.json</code> ä»æºä»£ç é‡Œç²˜è´´å‡ºæ¥, ä¸ç”¨ <code>tsc init</code></p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">compilerOptions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">target</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es2017</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">module</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">esnext</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">esnext</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">moduleResolution</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">esModuleInterop</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">strict</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">strictNullChecks</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">resolveJsonModule</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>TODO: tsé…ç½®é¡¹å«ä¹‰å¦å¤–è®²è§£</p><p><code>Ts</code> å¼•ç”¨ <code>nodejs</code> æ¨¡å—å¦‚ <code>fs</code> <code>path</code> æ²¡æœ‰ç±»å‹æç¤º</p><p>å®‰è£… <code>pnpm add -D @types/node</code> å³å¯, ä¸éœ€è¦é…ç½®</p><p>ğŸ¤” <code>Vite</code> é¡¹ç›®ä¸­æ˜¯å†…ç½®åˆ° <code>@vite/client</code> äº†, æ‰€ä»¥çœ‹ä¸å‡ºæ¥</p><p>ä¸ç”¨è®¾ç½® <code>package.json</code> <code>&quot;type&quot;: &quot;module&quot;</code>, å› ä¸º <code>tsno</code> æ‰§è¡Œtsä»£ç , è®¤è¯† <code>ESM</code>, ä¸éœ€è¦åƒ <code>nodejs</code> æ‰§è¡Œä»£ç ä¸€æ ·éœ€è¦çŸ¥é“æ˜¯ <code>ESM</code> è¿˜æ˜¯ <code>CJS</code></p><h3 id="æ­å»ºåŸºç¡€ç›®å½•ç»“æ„" tabindex="-1">æ­å»ºåŸºç¡€ç›®å½•ç»“æ„ <a class="header-anchor" href="#æ­å»ºåŸºç¡€ç›®å½•ç»“æ„" aria-label="Permalink to &quot;æ­å»ºåŸºç¡€ç›®å½•ç»“æ„&quot;">â€‹</a></h3><p>å› ä¸ºå¯¹å¤–çš„äº§ç‰©ä¼šç»è¿‡æ‰“åŒ…çš„ <code>mjs</code> <code>cjs</code> åˆ†åˆ«å¯¹åº” <code>package.json</code></p><ul><li><code>&quot;main&quot;: &quot;dist/index.cjs&quot;,</code></li><li><code>&quot;module&quot;: &quot;dist/index.mjs&quot;,</code></li></ul><p>ä»¥å¤šå…¥å£æ‰“åŒ…, æ¯ä¸ªæŒ‡ä»¤å¯¹åº”ä¸€ä¸ªå…¥å£</p><ul><li>å…¥å£æ–‡ä»¶åœ¨ <code>src/commands/xx</code></li><li>æ ¸å¿ƒæ–¹æ³•åœ¨ <code>src/xx</code></li></ul><p>å› ä¸ºåº“çš„ä½¿ç”¨æ–¹å¼ æ‰€ä»¥ç›®å½•ç»“æ„æ„Ÿè§‰å’Œå¸¸è§„çš„ç¡®å®ä¸åŒ</p><p>ğŸ‘‡ ä¸€èˆ¬çš„ç›®å½•ç»“æ„æˆ‘ä¼šè®¾è®¡ä¸º:</p><ul><li>å…¥å£æ–‡ä»¶ <code>src/index.js</code></li><li>æ ¸å¿ƒæ–¹æ³• <code>src/core/xx</code></li><li>è¾…åŠ©æ–¹æ³• <code>src/help/xx</code></li></ul><h3 id="åˆæ­¥è¿è¡Œ" tabindex="-1">åˆæ­¥è¿è¡Œ <a class="header-anchor" href="#åˆæ­¥è¿è¡Œ" aria-label="Permalink to &quot;åˆæ­¥è¿è¡Œ&quot;">â€‹</a></h3><p>é…ç½® <code>package.json</code> ä¸­çš„ <code>script</code></p><p>é€šè¿‡ <code>esno</code> æ‰§è¡Œ <code>ts</code> å…¥å£æ–‡ä»¶ <code>&quot;dev&quot;: &quot;tsno src/commands/ni.ts&quot;</code></p><p>å‘½ä»¤è¡Œæ‰§è¡Œ <code>pnpm dev</code> æ˜¯æœŸæœ›æ•ˆæœå³å¯</p><h2 id="åŒ¹é…é¡¹ç›®ç›®å½•ä¸‹çš„-lockfiles-æ–‡ä»¶" tabindex="-1">åŒ¹é…é¡¹ç›®ç›®å½•ä¸‹çš„ lockfiles æ–‡ä»¶ <a class="header-anchor" href="#åŒ¹é…é¡¹ç›®ç›®å½•ä¸‹çš„-lockfiles-æ–‡ä»¶" aria-label="Permalink to &quot;åŒ¹é…é¡¹ç›®ç›®å½•ä¸‹çš„ lockfiles æ–‡ä»¶&quot;">â€‹</a></h2><p><code>findUp</code> çš„ä½¿ç”¨ ä¼ å…¥æ–‡ä»¶åå­—ç¬¦ä¸²æ•°ç»„åŒ¹é… <img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230113171722.png" alt=""></p><p>ğŸ‘‡ å› æ­¤æˆ‘ä»¬åˆ—å‡ºæ‰€æœ‰ <code>lockfiles</code> çš„å®Œæ•´æ–‡ä»¶åå¸¸é‡æšä¸¾</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// the order here matters, more specific one comes first</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> LOCKS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">pnpm-lock.yaml</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pnpm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">yarn.lock</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">package-lock.json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pnpm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>ğŸ‘† <code>Ts</code> çš„ç±»å‹å®šä¹‰, å½“éœ€è¦é™åˆ¶ <code>key</code> å’Œ <code>value</code> æ—¶ä½¿ç”¨ <code>Record</code> ?TODO:</p><p><a href="https://github.com/sindresorhus/find-up" target="_blank" rel="noreferrer">find-up -github</a></p><ul><li>ç¬¬1ä¸ªå‚æ•° é€ <code>Object.keys(LOCKS)</code></li><li>ç¬¬2ä¸ªå‚æ•°å¯¹è±¡å±æ€§ <code>cwd - The current working directory @default process.cwd()</code></li></ul><p>è¿™é‡Œç¤ºä¾‹ä»£ç éƒ½é€šè¿‡é¡¹ç›®ç›®å½•çš„ <code>pnpm dev</code> è¿è¡Œ, å› æ­¤é»˜è®¤å€¼ <code>process.cwd</code> å³å¯</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">findUp</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">find-up</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pnpm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// the order here matters, more specific one comes first</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> LOCKS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Record</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">string</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">pnpm-lock.yaml</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pnpm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">yarn.lock</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">package-lock.json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">npm-shrinkwrap.json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æŸ¥æ‰¾æ¡£æ¡ˆé¡¹ç›®ä¸‹çš„ lockfiles å¹¶è·å–å†…å®¹å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">detect</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// { cwd } The current working directory. default process.cwd()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lockPath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">findUp</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">LOCKS</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">åŒ¹é…åˆ°çš„æ–‡ä»¶å®Œæ•´è·¯å¾„</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">lockPath</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">detect</span><span style="color:#A6ACCD;">()</span></span></code></pre></div><p>ğŸ‘† <code>pnpm dev</code> -&gt; <code>esno src/commands/ni.ts</code> è¾“å‡º <code>&#39;åŒ¹é…åˆ°çš„æ–‡ä»¶å®Œæ•´è·¯å¾„ /Users/luojinan/Desktop/code/vitepress/test/ni/pnpm-lock.yaml&#39;</code></p><p>æˆªå–å‡ºæ–‡ä»¶å, å¹¶åŒ¹é…å¸¸é‡æšä¸¾å³å¯çŸ¥é“æ˜¯ä»€ä¹ˆåŒ…ç®¡ç†å™¨</p><p>åˆ©ç”¨ <code>nodejs</code> å†…ç½®æ¨¡å— <code>path.basename(path)</code> æˆªå–ç»å¯¹è·¯å¾„ä¸­çš„æ–‡ä»¶å</p><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230113174945.png" alt=""></p><p>ğŸ‘† <code>path.basename()</code> çš„ <code>Ts</code> ç±»å‹ä¸å…è®¸ <code>undefined</code> ç±»å‹, è€Œ <code>findUp</code> è¾“å‡ºçš„ç»“æœ <code>lockPath</code> å‚æ•°ç±»å‹æ˜¯ <code>string | undefined</code></p><p>è¿™ç§æƒ…å†µåŒ…ä¸€å±‚ <code>if(lockPath)</code> å³å¯</p><p>è¿™æ—¶å€™ <code>agent</code> å˜é‡åº”è¯¥å®šä¹‰åœ¨å¤–é¢</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ğŸ‘‡ è¿™æ · ts ä¼šæç¤ºä¸èƒ½ Agentä¸åŒ…å«null</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> agent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// âŒ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> agent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span></span></code></pre></div><p>ğŸ‘‡ æœ€ç»ˆ</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æŸ¥æ‰¾æ¡£æ¡ˆé¡¹ç›®ä¸‹çš„ lockfiles å¹¶è·å–å†…å®¹å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">detect</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 1. åŒ¹é…é¡¹ç›®ç›®å½•ä¸‹çš„ lockfile æ–‡ä»¶åå–å‡ºç»å¯¹è·¯å¾„</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lockPath</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">findUp</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">LOCKS</span><span style="color:#F07178;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 2. package.json ä¸­çš„ packageManager ä¼˜å…ˆçº§æ¯” lockfiles é«˜ ç•¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 3. æ ¹æ® lockfiles æ–‡ä»¶è·¯å¾„å–å‡ºåŒ…ç®¡ç†å™¨å</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">agent</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">|</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">null</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lockPath</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">agent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">LOCKS</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">basename</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lockPath</span><span style="color:#F07178;">)] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 4. åˆ¤æ–­ç”µè„‘ç¯å¢ƒæ— è¯¥åŒ…ç®¡ç†å™¨ å°è¯•é—®ç­”å¼è‡ªåŠ¨å®‰è£… ç•¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">agent</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">detect</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">res</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(res)) </span><span style="color:#676E95;font-style:italic;">// --&gt; &#39;pnpm&#39;</span></span></code></pre></div><h2 id="æŠ¹å¹³æŒ‡ä»¤å±‚ç›¸å…³é…ç½®" tabindex="-1">æŠ¹å¹³æŒ‡ä»¤å±‚ç›¸å…³é…ç½® <a class="header-anchor" href="#æŠ¹å¹³æŒ‡ä»¤å±‚ç›¸å…³é…ç½®" aria-label="Permalink to &quot;æŠ¹å¹³æŒ‡ä»¤å±‚ç›¸å…³é…ç½®&quot;">â€‹</a></h2><p>é€šè¿‡åˆ—å‡ºä¸åŒçš„åŒ…ç®¡ç†å™¨çš„æŒ‡ä»¤æ¸…å•, ç”¨ä¸€ä¸ªå‚æ•°åŒ¹é…</p><p>å¦‚ å‚æ•° <code>add</code> å¯¹åº” <code>pnpm add</code> <code>yarn add</code> <code>npm install</code></p><p>å› ä¸ºæˆ‘ä»¬åªåš <code>ni</code> çš„åŠŸèƒ½å› æ­¤åˆ—å‡ºçš„æŒ‡ä»¤å¸¸é‡æ¸…å•</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> AGENTS </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm i {0}</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn add {0}</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">pnpm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pnpm add {0}</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230113181340.png" alt=""></p><p>ğŸ‘† <code>command</code> æ˜¯æŒ‡ä»¤æ¸…å•ä¸­çš„ <code>&#39;add&#39;</code></p><p><code>Ts</code> ç±»å‹ æˆ‘ä»¬éœ€è¦åˆ—å‡º <code>AGENTS</code> æ‰€æœ‰å±æ€§ä½œä¸º <code>Ts</code> æšä¸¾</p><p>åˆ©ç”¨ ğŸ‘‡ ç‰¹æ€§</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> colors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">red</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">green</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Green</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">blue</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Blue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TColors</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> colors </span><span style="color:#676E95;font-style:italic;">// &#39;red&#39; | &#39;green&#39; | &#39;blue&#39;</span></span></code></pre></div><p>é‚£ä¹ˆ</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Command</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> AGENTS</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">npm</span></span></code></pre></div><p>ä½ å¯èƒ½æ³¨æ„åˆ°äº†, ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº† <code>type agent = &#39;pnpm&#39; | &#39;yarn&#39; | &#39;npm&#39;</code></p><p>ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹å¼</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">keyof</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> AGENTS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç­‰åŒäº</span></span>
<span class="line"><span style="color:#C792EA;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pnpm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">yarn</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>ğŸ‘† å¯ä»¥çœ‹å‡ºè¿™ç§ç‰¹æ€§ åªèƒ½æŒ‰ç…§å…¶ä¸­ä¸€ä¸ªåŒ…ç®¡ç†å™¨çš„å±æ€§ <code>keyof typeof AGENTS.npm</code> æ¥å®šä¹‰ <code>type</code></p><p>éœ€è¦äººä¸ºè¦æ±‚æ¯æ·»åŠ ä¸€ä¸ªæŒ‡ä»¤, åº”ç»™æ¯ä¸ªåŒ…ç®¡ç†å™¨çš„æŒ‡ä»¤æ¸…å•éƒ½ç›¸åº”æ·»åŠ </p><p>ğŸ‘‡ æœ€ç»ˆ</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æ ¹æ®åŒ…ç®¡ç†å™¨åç§° ä»¥åŠéœ€è¦åŒ¹é…çš„key è¾“å‡ºå®Œæ•´æŒ‡ä»¤</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getCommand</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">agent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Agent</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">command</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">Command</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">AGENTS</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">agent</span><span style="color:#F07178;">][</span><span style="color:#A6ACCD;">command</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">agent</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">detect</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">agent</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">command</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getCommand</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">agent</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">command</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">// --&gt; &#39;pnpm add {0}&#39;</span></span></code></pre></div><h2 id="å¤„ç†å‘½ä»¤è¡Œå‚æ•°" tabindex="-1">å¤„ç†å‘½ä»¤è¡Œå‚æ•° <a class="header-anchor" href="#å¤„ç†å‘½ä»¤è¡Œå‚æ•°" aria-label="Permalink to &quot;å¤„ç†å‘½ä»¤è¡Œå‚æ•°&quot;">â€‹</a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank" rel="noreferrer">Boolean -MDN</a></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> args </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">argv</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">(Boolean)</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> a </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">NaN,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">(Boolean)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// [1, 2, &quot;b&quot;, {}, 3, 5]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç­‰ä»·äº</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> a</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Boolean</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p><code>Boolean</code> æœ¬è´¨æ˜¯ä¸€ä¸ªæ¥æ”¶å‚æ•°çš„å‡½æ•°, åœ¨ <code>filter</code> ä¸­æ¥æ”¶åˆ°æ•°ç»„é¡¹çš„å‚æ•°å¹¶è¿”å› <code>true/false</code> è¢« <code>filter</code> è¿‡æ»¤</p><p><code>pnpm dev vite -D</code> --&gt; <code>â€˜pnpm add vite -Dâ€™</code></p><p>è‡³æ­¤, æˆ‘ä»¬å·²ç»ç”¨jsé€»è¾‘å¤„ç†å¥½äº†åŒºåˆ†åŒ…ç®¡ç†å™¨å’Œç®€å†™å‘½ä»¤ä»¥åŠæ‹¼æ¥å‚æ•°å¾—åˆ°ç›®æ ‡å‘½ä»¤å­—ç¬¦ä¸²çš„é€»è¾‘</p><h2 id="jsæ‰§è¡Œè¿™æ®µå­—ç¬¦ä¸²å‘½ä»¤è¡Œ" tabindex="-1">jsæ‰§è¡Œè¿™æ®µå­—ç¬¦ä¸²å‘½ä»¤è¡Œ <a class="header-anchor" href="#jsæ‰§è¡Œè¿™æ®µå­—ç¬¦ä¸²å‘½ä»¤è¡Œ" aria-label="Permalink to &quot;jsæ‰§è¡Œè¿™æ®µå­—ç¬¦ä¸²å‘½ä»¤è¡Œ&quot;">â€‹</a></h2><p><code>pnpm add execa -D</code></p><p><a href="https://github.com/sindresorhus/execa" target="_blank" rel="noreferrer">execa-github</a></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">execaCommand</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">execa</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// readonly cwd?: string | URL; Current working directory of the child process. @default process.cwd()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">execaCommand</span><span style="color:#A6ACCD;">(command</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">stdio</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">inherit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">encoding</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>è‡³æ­¤é€šè¿‡ <code>npm script</code> æ‰§è¡Œå·¥å…·è„šæœ¬(esnoæ‰§è¡Œts)çš„åŠŸèƒ½å®ç°äº†</p><h2 id="æ‰“åŒ…-ğŸ“¦" tabindex="-1">æ‰“åŒ… ğŸ“¦ <a class="header-anchor" href="#æ‰“åŒ…-ğŸ“¦" aria-label="Permalink to &quot;æ‰“åŒ… ğŸ“¦&quot;">â€‹</a></h2><p>æ¥ç€æˆ‘ä»¬éœ€è¦åšæˆ <code>nodejs</code> çš„ <code>bin</code> è„šæœ¬ åªèƒ½ç”¨ <code>js</code> æˆ–è€… <code>sh</code></p><p>ä¹Ÿå°±æ˜¯éœ€è¦ä½¿ç”¨åˆ°jsåº“æ‰“åŒ…å·¥å…·(å³ä½¿ä¸æ‰“åŒ…è‡³å°‘ä¹Ÿè¦è½¬è¯‘ts), ç¬¬ä¸€å°è±¡é‡Œæ˜¯ä½¿ç”¨ä¼˜äº <code>webpack</code> <code>çš„rollup</code></p><p>ä½†æ˜¯éšç€å„ç§æŠ€æœ¯çš„è¿›æ­¥, æˆ‘ä»¬å¯ä»¥è¯•è¯•å…¶ä»–ä¸é”™çš„ jsåº“æ‰“åŒ…å·¥å…·</p><ul><li><code>tsup</code> TODO:</li><li><code>unbuild</code> åŸºäº<code>rollup</code>, åˆæ˜¯ä¸€ä¸ªå†…ç½®é»˜è®¤é…ç½®çš„ç±»ä¼¼ <code>vue-cli</code> çš„å·¥å…·å‘€...</li></ul><p>ä¼šæ ¹æ® <code>package.json</code> ä¸­çš„ <code>js</code> åº“ç›¸å…³å±æ€§è¿›è¡Œå†…ç½®æ‰“åŒ…æ¨¡å¼</p><p>å‘½ä»¤è¡Œæ‰§è¡Œ <code>unbuild</code> è„šæœ¬ é»˜è®¤è¯»å– <code>src</code> ä¸‹çš„å…¥å£æ–‡ä»¶</p><p>éœ€è¦ä¿®æ”¹è¦æ–°å»º <code>build.config.ts</code> é…ç½®æ–‡ä»¶</p><p>ğŸ‘‡ <code>build.config.ts</code></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defineBuildConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">unbuild</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defineBuildConfig</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">entries</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./src/commands/ni</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">clean</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">declaration</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">rollup</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">emitCJS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">inlineDependencies</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>ğŸ‘† ä¸é…ç½® <code>declaration</code> <code>rollup</code> å°†åªç”Ÿæˆ <code>dist/ni.mjs</code></p><p>é…ç½®ä¸Šæ‰ä¼šç”Ÿæˆ <code>ni.cjs</code> <code>ni.d.ts</code></p><p>TODO: å…·ä½“é…ç½®å«ä¹‰</p><p>é‚£ <code>package.json</code> ä¸Šçš„å±æ€§ä¸è‡ªåŠ¨è¯»å’¯...</p><p>ç›´æ¥è¿è¡Œ <code>npx unbuild</code> æˆ–é…ç½® <code>&quot;unbuild&quot;: &quot;unbuild&quot;</code> é€šè¿‡<code>pnpm unbuild</code> è¿è¡Œè„šæœ¬</p><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230116115737.png" alt=""></p><p><img src="https://kingan-md-img.oss-cn-guangzhou.aliyuncs.com/blog/20230116135546.png" alt=""></p><p>æ­¤æ—¶ä¸å†é€šè¿‡ <code>esno src/commands/ni.ts</code> æ‰§è¡Œå…¥å£æ–‡ä»¶</p><p>è€Œæ˜¯ <code>node dist/ni.mjs vite -D</code> æ‰§è¡Œ</p><h2 id="bin-æ–‡ä»¶" tabindex="-1">bin æ–‡ä»¶ <a class="header-anchor" href="#bin-æ–‡ä»¶" aria-label="Permalink to &quot;bin æ–‡ä»¶&quot;">â€‹</a></h2><p>ğŸ‘‡ æ–°å»º <code>bin/ni.mjs</code> ç›´æ¥å¼•å…¥ dist æ–‡ä»¶</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/usr/bin/env node</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../dist/ni.mjs</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>è¿è¡Œ <code>node bin/ni.mjs</code></p><p>TODO: è¾“å‡º bin åº“çš„æœ€ä½³å®è·µ</p><p><a href="https://github.com/luojinan/note-by-vitepress/tree/master/test/ni" target="_blank" rel="noreferrer">æºç  -github</a></p><h2 id="æ€è€ƒ" tabindex="-1">æ€è€ƒ <a class="header-anchor" href="#æ€è€ƒ" aria-label="Permalink to &quot;æ€è€ƒ&quot;">â€‹</a></h2><p>ğŸ¤” ä¸ºä»€ä¹ˆè¦æ‰“åŒ…ğŸ“¦</p><p>ä¸ºäº†ä½œä¸ºå…¨å±€ä¾èµ–å—ï¼Ÿ</p><p>åˆ«äººå®‰è£…äº† niåŒ…(æ‰“åŒ…é›†æˆä¸€äº›å¤–éƒ¨åº“)ï¼Œå‡å¦‚é¡¹ç›®å†…éƒ¨æœ¬èº«å°±æœ‰å®‰è£…è¿‡é‚£äº›å¤–éƒ¨åº“çš„è¯ å°±ç®—é‡å¤å®‰è£…äº†</p><p>å‡è®¾ <code>ni</code> ä¸æ‰“åŒ…, æŠŠè¿™äº›ä½œä¸ºå‰ç½®ä¾èµ–, ä¸æ˜¯æ›´å¥½ï¼Ÿ è¿˜æ˜¯è¯´å› ä¸º <code>bin</code> æ–‡ä»¶ä¸€å®šè¦æ²¡æœ‰å¤–éƒ¨ä¾èµ–çš„ä»£ç ï¼Ÿ</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2><ul><li><a href="https://juejin.cn/post/7023910122770399269" target="_blank" rel="noreferrer">å°¤é›¨æºªæ¨èç¥å™¨ ni ï¼Œèƒ½æ›¿ä»£ npm/yarn/pnpm ï¼Ÿç®€å•å¥½ç”¨ï¼æºç æ­ç§˜ï¼</a></li></ul>`,124),e=[p];function c(t,r,D,y,F,C){return n(),a("div",null,e)}const d=s(l,[["render",c]]);export{A as __pageData,d as default};
